<!-- ======================================================================
     UNIVERSAL HEADER - GOLDMINE DERIVATIVES PLATFORM
     ScanX Style - Clean, minimal, professional design
     ====================================================================== -->

<header class="universal-header">
  <div class="header-container">

    <!-- LEFT: Logo -->
    <div class="header-logo">
      <a href="{{ url_for('home.home') }}" class="logo-link" title="Goldmine Derivatives">
        <img src="{{ url_for('static', filename='image/Goldmine-logo.png') }}" alt="Goldmine" class="logo-img">
      </a>
    </div>

    <!-- CENTER: Navigation -->
    <nav class="header-nav">
      <a href="{{ url_for('home.home') }}" class="nav-link {% if request.endpoint == 'home.home' %}active{% endif %}">
        Home
      </a>
      <a href="{{ url_for('news.news_page') }}"
        class="nav-link {% if request.endpoint and 'news' in request.endpoint %}active{% endif %}">
        News
      </a>
      <a href="{{ url_for('screener.screener_landing') }}"
        class="nav-link {% if request.endpoint and 'screener' in request.endpoint %}active{% endif %}">
        Scanners
      </a>
      <a href="{{ url_for('insights.insights_page') }}"
        class="nav-link {% if request.endpoint and 'insights' in request.endpoint %}active{% endif %}">
        Neev
      </a>
      <a href="{{ url_for('dashboard.dashboard') }}"
        class="nav-link {% if request.endpoint and 'dashboard' in request.endpoint %}active{% endif %}">
        Dashboard
      </a>
    </nav>

    <!-- CENTER-RIGHT: Search Box -->
    <div class="header-search">
      <div class="search-wrapper">
        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input type="text" id="stockSearchInput" class="search-input" placeholder="Search for stocks" autocomplete="off"
          list="stockList" onkeypress="handleSearchKeypress(event)">
        <datalist id="stockList">
          {% if stock_list %}
          {% for symbol in stock_list %}
          <option value="{{ symbol }}">
            {% endfor %}
            {% endif %}
        </datalist>
      </div>
    </div>

    <!-- RIGHT: User Actions -->
    <div class="header-actions">
      {% if current_user %}
      <div class="user-info" style="display:flex; align-items:center; gap:12px;">
        <span style="font-size:13px; color:#374151; font-weight:600;">
          üë§ {{ user_display_name or current_user }}
        </span>
        {% if current_user == 'admin' %}
        <a href="{{ url_for('admin.users_dashboard') }}"
           style="font-size:12px; color:#6b7280; text-decoration:none; padding:5px 10px;
                  border:1px solid #e5e7eb; border-radius:5px;">‚öôÔ∏è Admin</a>
        {% endif %}
        <a href="{{ url_for('auth.logout') }}"
           style="font-size:13px; color:#8B2432; font-weight:600; text-decoration:none; padding:6px 14px; border:1.5px solid #8B2432; border-radius:6px; transition:all 0.2s;"
           onmouseover="this.style.background='#8B2432';this.style.color='white';"
           onmouseout="this.style.background='transparent';this.style.color='#8B2432';">
          Logout
        </a>
      </div>
      {% endif %}
    </div>

  </div>
</header>

<script>
  function handleSearchKeypress(event) {
    if (event.key === 'Enter') {
      const ticker = document.getElementById('stockSearchInput').value.trim().toUpperCase();
      if (ticker) {
        window.location.href = '/stock/' + ticker;
      }
    }
  }
</script>
