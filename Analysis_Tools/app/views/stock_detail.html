{% extends "base.html" %}
{% block title %}{{ ticker }} Option Chain Analysis{% endblock %}

{% block content %}

<!-- ============================= -->
<!-- 🔗 Component & Page Styles -->
<!-- ============================= -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail_header.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail_expiry.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail_stats.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail_chart.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/stock_detail_option_chain.css') }}">

<!-- ============================= -->
<!-- 🌐 Universal Header -->
<!-- ============================= -->
{% include 'dashboard_header.html' %}

<!-- ============================= -->
<!-- 📈 Stock Detail Section -->
<!-- ============================= -->
<div class="stock-detail-container">

  {% if data %}

  <!-- Top Section: Expiry Summary + Stats -->
  <div class="top-section">
    {% include 'stock_detail_expiry.html' %}
    {% include 'stock_detail_stats.html' %}
  </div>

  <!-- Mid Section: Historical Chart -->
  {% include 'stock_detail_chart.html' %}

  <!-- Bottom Section: Option Chain Table -->
  {% include 'stock_detail_option_chain.html' %}

  {% else %}
  <p class="no-data">No stock details found for {{ ticker }} on {{ selected_date }}</p>
  {% endif %}

</div>

<!-- ============================= -->
<!-- 📜 Optional Header Shrink Script -->
<!-- ============================= -->
<script>
window.addEventListener('scroll', function() {
  const header = document.querySelector('.dashboard-header');
  if (window.scrollY > 50) header.classList.add('shrink');
  else header.classList.remove('shrink');
});
</script>

{% endblock %}
